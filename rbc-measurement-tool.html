<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Red Blood Cell Measurement Tool</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.5.0/Recharts.js"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #eff6ff 0%, #e0e7ff 100%);
            min-height: 100vh;
            padding: 1rem;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2563eb 0%, #4f46e5 100%);
            color: white;
            padding: 1.5rem;
        }
        
        .header h1 {
            font-size: 1.875rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .header p {
            color: #bfdbfe;
            font-size: 0.875rem;
        }
        
        .content {
            padding: 1.5rem;
        }
        
        .info-panel {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        .info-panel.hidden {
            display: none;
        }
        
        .info-panel h3 {
            color: #1e3a8a;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .info-panel ul {
            list-style: none;
            color: #1e40af;
            font-size: 0.875rem;
        }
        
        .info-panel li {
            margin-bottom: 0.25rem;
        }
        
        .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: #2563eb;
            font-size: 1.25rem;
            font-weight: bold;
            cursor: pointer;
        }
        
        .grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        
        @media (min-width: 1024px) {
            .grid {
                grid-template-columns: 2fr 1fr;
            }
        }
        
        .canvas-area {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .sample-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f9fafb;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }
        
        .sample-name {
            font-weight: 600;
            color: #111827;
        }
        
        .sample-label {
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #2563eb;
            color: white;
        }
        
        .btn-primary:hover {
            background: #1d4ed8;
        }
        
        .canvas-container {
            border: 4px solid #d1d5db;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        canvas {
            display: block;
            width: 100%;
            cursor: crosshair;
            touch-action: none;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }
        
        .chart-container {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 1rem;
        }
        
        .chart-container h3 {
            font-weight: 600;
            color: #111827;
            margin-bottom: 1rem;
        }
        
        .side-panel {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .stat-card {
            border-radius: 8px;
            padding: 1rem;
            border: 2px solid;
        }
        
        .stat-card.green {
            background: #f0fdf4;
            border-color: #bbf7d0;
        }
        
        .stat-card.gray {
            background: #f9fafb;
            border-color: #e5e7eb;
        }
        
        .stat-card.blue {
            background: #eff6ff;
            border-color: #bfdbfe;
        }
        
        .stat-card.amber {
            background: #fffbeb;
            border-color: #fde68a;
        }
        
        .stat-card h3 {
            font-weight: 600;
            margin-bottom: 0.75rem;
            font-size: 0.95rem;
        }
        
        .stat-card.green h3 { color: #166534; }
        .stat-card.gray h3 { color: #374151; }
        .stat-card.blue h3 { color: #1e40af; }
        .stat-card.amber h3 { color: #92400e; }
        
        .stat-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }
        
        .stat-label {
            color: #4b5563;
        }
        
        .stat-value {
            font-weight: 600;
            color: #111827;
        }
        
        .measurement-list {
            max-height: 240px;
            overflow-y: auto;
        }
        
        .measurement-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #e5e7eb;
            font-size: 0.875rem;
        }
        
        .clear-btn {
            color: #dc2626;
            background: none;
            border: none;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            padding: 0.25rem 0.5rem;
        }
        
        .clear-btn:hover {
            color: #991b1b;
        }
        
        .reference-info {
            font-size: 0.875rem;
        }
        
        .reference-info > div {
            margin-bottom: 0.75rem;
        }
        
        .reference-info p {
            margin: 0;
        }
        
        .reference-info .label {
            font-weight: 600;
            color: #1e40af;
        }
        
        .reference-info .detail {
            color: #1e40af;
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
        
        .accuracy-indicator {
            padding: 0.75rem;
            border-radius: 6px;
            margin-bottom: 0.75rem;
        }
        
        .accuracy-indicator.excellent {
            background: #d1fae5;
            border: 2px solid #6ee7b7;
        }
        
        .accuracy-indicator.good {
            background: #dbeafe;
            border: 2px solid #93c5fd;
        }
        
        .accuracy-indicator.fair {
            background: #fef3c7;
            border: 2px solid #fde047;
        }
        
        .accuracy-indicator.poor {
            background: #fee2e2;
            border: 2px solid #fca5a5;
        }
        
        .accuracy-label {
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }
        
        .accuracy-detail {
            font-size: 0.75rem;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        const RBCMeasurementTool = () => {
            const canvasRef = useRef(null);
            const [currentSlide, setCurrentSlide] = useState(null);
            const [cells, setCells] = useState([]);
            const [measuring, setMeasuring] = useState(false);
            const [measureStart, setMeasureStart] = useState(null);
            const [measureEnd, setMeasureEnd] = useState(null);
            const [measurements, setMeasurements] = useState([]);
            const [scale] = useState(0.1);
            const [showInfo, setShowInfo] = useState(true);

            const generateSlide = (slideNumber) => {
                const random = (seed) => {
                    const x = Math.sin(seed) * 10000;
                    return x - Math.floor(x);
                };

                const newCells = [];
                const baseSeed = slideNumber * 1000;
                
                const slideConfigs = [
                    { count: 18, avgSize: 70, variance: 8, name: "Normal Blood Smear", trueAvg: 7.0 },
                    { count: 22, avgSize: 55, variance: 6, name: "Microcytic Sample", trueAvg: 5.5 },
                    { count: 15, avgSize: 85, variance: 10, name: "Macrocytic Sample", trueAvg: 8.5 },
                    { count: 20, avgSize: 70, variance: 15, name: "Anisocytosis Sample", trueAvg: 7.0 },
                    { count: 19, avgSize: 68, variance: 7, name: "Healthy Control", trueAvg: 6.8 }
                ];
                
                const config = slideConfigs[slideNumber];
                
                for (let i = 0; i < config.count; i++) {
                    const seed = baseSeed + i;
                    const diameter = config.avgSize + (random(seed) - 0.5) * config.variance * 2;
                    
                    newCells.push({
                        x: 50 + random(seed * 2) * 700,
                        y: 50 + random(seed * 3) * 500,
                        diameter: diameter,
                        rotation: random(seed * 4) * Math.PI * 2,
                        shade: 0.7 + random(seed * 5) * 0.3,
                        trueDiameter: diameter * scale
                    });
                }
                
                return { cells: newCells, config };
            };

            useEffect(() => {
                loadNewSlide();
            }, []);

            const loadNewSlide = () => {
                const slideNumber = Math.floor(Math.random() * 5);
                const slide = generateSlide(slideNumber);
                setCurrentSlide(slide);
                setCells(slide.cells);
                setMeasurements([]);
                setMeasureStart(null);
                setMeasureEnd(null);
            };

            useEffect(() => {
                drawCanvas();
            }, [cells, measureStart, measureEnd, measurements]);

            const drawCanvas = () => {
                const canvas = canvasRef.current;
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                
                const gradient = ctx.createRadialGradient(400, 300, 50, 400, 300, 500);
                gradient.addColorStop(0, '#faf9f7');
                gradient.addColorStop(1, '#f0ede8');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, 800, 600);
                
                ctx.fillStyle = 'rgba(0, 0, 0, 0.01)';
                for (let i = 0; i < 1000; i++) {
                    const x = Math.random() * 800;
                    const y = Math.random() * 600;
                    ctx.fillRect(x, y, 1, 1);
                }
                
                cells.forEach(cell => {
                    ctx.save();
                    ctx.translate(cell.x, cell.y);
                    ctx.rotate(cell.rotation);
                    
                    const cellGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, cell.diameter / 2);
                    const intensity = cell.shade;
                    cellGradient.addColorStop(0, `rgba(255, ${180 * intensity}, ${180 * intensity}, 0.9)`);
                    cellGradient.addColorStop(0.3, `rgba(255, ${140 * intensity}, ${140 * intensity}, 0.92)`);
                    cellGradient.addColorStop(0.6, `rgba(230, ${100 * intensity}, ${100 * intensity}, 0.95)`);
                    cellGradient.addColorStop(1, `rgba(200, ${80 * intensity}, ${80 * intensity}, 0.97)`);
                    
                    ctx.fillStyle = cellGradient;
                    ctx.beginPath();
                    ctx.arc(0, 0, cell.diameter / 2, 0, Math.PI * 2);
                    ctx.fill();
                    
                    const pallorGradient = ctx.createRadialGradient(0, 0, 0, 0, 0, cell.diameter / 3.5);
                    pallorGradient.addColorStop(0, 'rgba(255, 245, 245, 0.8)');
                    pallorGradient.addColorStop(1, 'rgba(255, 220, 220, 0)');
                    ctx.fillStyle = pallorGradient;
                    ctx.beginPath();
                    ctx.arc(0, 0, cell.diameter / 3.5, 0, Math.PI * 2);
                    ctx.fill();
                    
                    ctx.strokeStyle = `rgba(180, ${60 * intensity}, ${60 * intensity}, 0.6)`;
                    ctx.lineWidth = 0.8;
                    ctx.beginPath();
                    ctx.arc(0, 0, cell.diameter / 2, 0, Math.PI * 2);
                    ctx.stroke();
                    
                    ctx.restore();
                });
                
                if (measureStart && measureEnd) {
                    ctx.strokeStyle = '#2563eb';
                    ctx.lineWidth = 3;
                    ctx.setLineDash([8, 4]);
                    ctx.beginPath();
                    ctx.moveTo(measureStart.x, measureStart.y);
                    ctx.lineTo(measureEnd.x, measureEnd.y);
                    ctx.stroke();
                    ctx.setLineDash([]);
                    
                    ctx.fillStyle = '#2563eb';
                    ctx.strokeStyle = '#ffffff';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.arc(measureStart.x, measureStart.y, 6, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.arc(measureEnd.x, measureEnd.y, 6, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.stroke();
                    
                    const dx = measureEnd.x - measureStart.x;
                    const dy = measureEnd.y - measureStart.y;
                    const pixelDistance = Math.sqrt(dx * dx + dy * dy);
                    const distance = pixelDistance * scale;
                    
                    const midX = (measureStart.x + measureEnd.x) / 2;
                    const midY = (measureStart.y + measureEnd.y) / 2;
                    
                    ctx.fillStyle = 'rgba(37, 99, 235, 0.95)';
                    ctx.strokeStyle = '#ffffff';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.roundRect(midX - 45, midY - 18, 90, 36, 6);
                    ctx.fill();
                    ctx.stroke();
                    
                    ctx.fillStyle = 'white';
                    ctx.font = 'bold 16px sans-serif';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(`${distance.toFixed(2)} ¬µm`, midX, midY);
                }
                
                measurements.forEach((m) => {
                    ctx.strokeStyle = '#16a34a';
                    ctx.lineWidth = 2;
                    ctx.setLineDash([5, 3]);
                    ctx.beginPath();
                    ctx.moveTo(m.start.x, m.start.y);
                    ctx.lineTo(m.end.x, m.end.y);
                    ctx.stroke();
                    ctx.setLineDash([]);
                    
                    ctx.fillStyle = '#16a34a';
                    ctx.strokeStyle = '#ffffff';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.arc(m.start.x, m.start.y, 5, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.stroke();
                    ctx.beginPath();
                    ctx.arc(m.end.x, m.end.y, 5, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.stroke();
                    
                    const midX = (m.start.x + m.end.x) / 2;
                    const midY = (m.start.y + m.end.y) / 2;
                    
                    ctx.fillStyle = 'rgba(22, 163, 74, 0.95)';
                    ctx.strokeStyle = '#ffffff';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.roundRect(midX - 40, midY - 16, 80, 32, 6);
                    ctx.fill();
                    ctx.stroke();
                    
                    ctx.fillStyle = 'white';
                    ctx.font = 'bold 14px sans-serif';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.fillText(`${m.distance.toFixed(2)} ¬µm`, midX, midY);
                });
                
                const scaleBarLength = 10 / scale;
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.roundRect(18, 548, scaleBarLength + 14, 38, 6);
                ctx.fill();
                ctx.stroke();
                
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 4;
                ctx.beginPath();
                ctx.moveTo(25, 567);
                ctx.lineTo(25 + scaleBarLength, 567);
                ctx.stroke();
                
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(25, 562);
                ctx.lineTo(25, 572);
                ctx.moveTo(25 + scaleBarLength, 562);
                ctx.lineTo(25 + scaleBarLength, 572);
                ctx.stroke();
                
                ctx.fillStyle = '#333';
                ctx.font = 'bold 13px sans-serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('10 ¬µm', 25 + scaleBarLength / 2, 580);
            };

            const handleCanvasMouseDown = (e) => {
                e.preventDefault();
                const rect = canvasRef.current.getBoundingClientRect();
                const touch = e.touches ? e.touches[0] : e;
                const x = (touch.clientX - rect.left) * (800 / rect.width);
                const y = (touch.clientY - rect.top) * (600 / rect.height);
                
                setMeasuring(true);
                setMeasureStart({ x, y });
                setMeasureEnd({ x, y });
            };

            const handleCanvasMouseMove = (e) => {
                if (!measuring) return;
                e.preventDefault();
                
                const rect = canvasRef.current.getBoundingClientRect();
                const touch = e.touches ? e.touches[0] : e;
                const x = (touch.clientX - rect.left) * (800 / rect.width);
                const y = (touch.clientY - rect.top) * (600 / rect.height);
                
                setMeasureEnd({ x, y });
            };

            const handleCanvasMouseUp = (e) => {
                if (!measuring) return;
                e.preventDefault();
                
                if (measureStart && measureEnd) {
                    const dx = measureEnd.x - measureStart.x;
                    const dy = measureEnd.y - measureStart.y;
                    const pixelDistance = Math.sqrt(dx * dx + dy * dy);
                    const distance = pixelDistance * scale;
                    
                    if (pixelDistance > 10) {
                        setMeasurements([...measurements, {
                            start: measureStart,
                            end: measureEnd,
                            distance: distance
                        }]);
                    }
                    
                    setMeasureStart(null);
                    setMeasureEnd(null);
                }
                setMeasuring(false);
            };

            const calculateStats = () => {
                if (measurements.length === 0) return null;
                
                const distances = measurements.map(m => m.distance);
                const avg = distances.reduce((a, b) => a + b, 0) / distances.length;
                const min = Math.min(...distances);
                const max = Math.max(...distances);
                const sorted = [...distances].sort((a, b) => a - b);
                const median = sorted.length % 2 === 0 
                    ? (sorted[sorted.length / 2 - 1] + sorted[sorted.length / 2]) / 2
                    : sorted[Math.floor(sorted.length / 2)];
                
                const variance = distances.reduce((sum, val) => sum + Math.pow(val - avg, 2), 0) / distances.length;
                const stdDev = Math.sqrt(variance);
                
                // Calculate accuracy (how close to true mean)
                const trueAvg = currentSlide?.config?.trueAvg || 7.0;
                const accuracy = Math.abs(avg - trueAvg);
                const accuracyPercent = Math.max(0, 100 - (accuracy / trueAvg * 100));
                
                // Calculate precision (consistency - lower std dev = higher precision)
                const precisionPercent = Math.max(0, 100 - (stdDev / avg * 100));
                
                return { 
                    avg, 
                    min, 
                    max, 
                    median, 
                    stdDev, 
                    count: distances.length,
                    accuracy: accuracyPercent,
                    precision: precisionPercent,
                    trueAvg
                };
            };

            const getAccuracyRating = (accuracyPercent) => {
                if (accuracyPercent >= 95) return { level: 'excellent', text: 'Excellent', color: '#10b981' };
                if (accuracyPercent >= 85) return { level: 'good', text: 'Good', color: '#3b82f6' };
                if (accuracyPercent >= 70) return { level: 'fair', text: 'Fair', color: '#f59e0b' };
                return { level: 'poor', text: 'Needs Improvement', color: '#ef4444' };
            };

            const getPrecisionRating = (precisionPercent) => {
                if (precisionPercent >= 90) return { level: 'excellent', text: 'Excellent', color: '#10b981' };
                if (precisionPercent >= 80) return { level: 'good', text: 'Good', color: '#3b82f6' };
                if (precisionPercent >= 65) return { level: 'fair', text: 'Fair', color: '#f59e0b' };
                return { level: 'poor', text: 'Needs Improvement', color: '#ef4444' };
            };

            const stats = calculateStats();
            const accuracyRating = stats ? getAccuracyRating(stats.accuracy) : null;
            const precisionRating = stats ? getPrecisionRating(stats.precision) : null;

            return (
                <div className="container">
                    <div className="header">
                        <h1>
                            üî¨ Red Blood Cell Measurement Tool
                        </h1>
                        <p>Click and drag across cells to measure their diameter</p>
                    </div>

                    <div className="content">
                        <div className={`info-panel ${!showInfo ? 'hidden' : ''}`}>
                            <button className="close-btn" onClick={() => setShowInfo(false)}>‚úï</button>
                            <h3>Instructions:</h3>
                            <ul>
                                <li>‚Ä¢ Click and drag across a cell to measure its diameter</li>
                                <li>‚Ä¢ Normal RBCs are typically 6-8 micrometers (¬µm)</li>
                                <li>‚Ä¢ Take at least 10 measurements for accurate results</li>
                                <li>‚Ä¢ Your accuracy and precision will be evaluated</li>
                            </ul>
                        </div>

                        <div className="grid">
                            <div className="canvas-area">
                                {currentSlide && (
                                    <div className="sample-info">
                                        <div>
                                            <div className="sample-label">Current Sample:</div>
                                            <div className="sample-name">{currentSlide.config.name}</div>
                                        </div>
                                        <button className="btn btn-primary" onClick={loadNewSlide}>
                                            üîÑ New Sample
                                        </button>
                                    </div>
                                )}

                                <div className="canvas-container">
                                    <canvas
                                        ref={canvasRef}
                                        width={800}
                                        height={600}
                                        onMouseDown={handleCanvasMouseDown}
                                        onMouseMove={handleCanvasMouseMove}
                                        onMouseUp={handleCanvasMouseUp}
                                        onMouseLeave={handleCanvasMouseUp}
                                        onTouchStart={handleCanvasMouseDown}
                                        onTouchMove={handleCanvasMouseMove}
                                        onTouchEnd={handleCanvasMouseUp}
                                        onTouchCancel={handleCanvasMouseUp}
                                    />
                                </div>
                            </div>

                            <div className="side-panel">
                                {stats ? (
                                    <>
                                        <div className="stat-card green">
                                            <h3>üìä Statistics</h3>
                                            <div className="stat-row">
                                                <span className="stat-label">Measurements:</span>
                                                <span className="stat-value">{stats.count}</span>
                                            </div>
                                            <div className="stat-row">
                                                <span className="stat-label">Mean:</span>
                                                <span className="stat-value">{stats.avg.toFixed(2)} ¬µm</span>
                                            </div>
                                            <div className="stat-row">
                                                <span className="stat-label">Median:</span>
                                                <span className="stat-value">{stats.median.toFixed(2)} ¬µm</span>
                                            </div>
                                            <div className="stat-row">
                                                <span className="stat-label">Std Dev:</span>
                                                <span className="stat-value">¬±{stats.stdDev.toFixed(2)} ¬µm</span>
                                            </div>
                                            <div className="stat-row">
                                                <span className="stat-label">Range:</span>
                                                <span className="stat-value">{stats.min.toFixed(2)} - {stats.max.toFixed(2)} ¬µm</span>
                                            </div>
                                        </div>

                                        <div className="stat-card amber">
                                            <h3>üéØ Accuracy & Precision</h3>
                                            
                                            <div className={`accuracy-indicator ${accuracyRating.level}`}>
                                                <div className="accuracy-label" style={{color: accuracyRating.color}}>
                                                    Accuracy: {accuracyRating.text} ({stats.accuracy.toFixed(1)}%)
                                                </div>
                                                <div className="accuracy-detail">
                                                    Your mean: {stats.avg.toFixed(2)} ¬µm | True mean: {stats.trueAvg.toFixed(2)} ¬µm
                                                </div>
                                            </div>

                                            <div className={`accuracy-indicator ${precisionRating.level}`}>
                                                <div className="accuracy-label" style={{color: precisionRating.color}}>
                                                    Precision: {precisionRating.text} ({stats.precision.toFixed(1)}%)
                                                </div>
                                                <div className="accuracy-detail">
                                                    Standard deviation: ¬±{stats.stdDev.toFixed(2)} ¬µm
                                                </div>
                                            </div>
                                            
                                            <div style={{fontSize: '0.75rem', color: '#92400e', marginTop: '0.5rem'}}>
                                                <strong>Tip:</strong> {stats.count < 10 ? 'Take more measurements for better accuracy!' : 
                                                stats.accuracy < 85 ? 'Try to measure cells more precisely across their widest point.' :
                                                stats.precision < 80 ? 'Focus on consistent measurement technique.' :
                                                'Excellent work! Your measurements are accurate and precise.'}
                                            </div>
                                        </div>
                                    </>
                                ) : (
                                    <div className="stat-card gray">
                                        <h3>üìä Statistics</h3>
                                        <p style={{color: '#6b7280', fontSize: '0.875rem'}}>Take measurements to see statistics</p>
                                    </div>
                                )}

                                {measurements.length > 0 && (
                                    <div className="stat-card gray">
                                        <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '0.75rem'}}>
                                            <h3>üìù Measurements</h3>
                                            <button className="clear-btn" onClick={() => setMeasurements([])}>Clear</button>
                                        </div>
                                        <div className="measurement-list">
                                            {measurements.map((m, idx) => (
                                                <div key={idx} className="measurement-item">
                                                    <span style={{color: '#6b7280'}}>Cell {idx + 1}:</span>
                                                    <span style={{fontWeight: 600, color: '#111827'}}>{m.distance.toFixed(2)} ¬µm</span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                <div className="stat-card blue">
                                    <h3>üìö Reference Values</h3>
                                    <div className="reference-info">
                                        <div>
                                            <p className="label">Normal RBC:</p>
                                            <p style={{color: '#1e40af'}}>6.0 - 8.0 ¬µm</p>
                                        </div>
                                        <div>
                                            <p className="label">Microcytic (&lt;6.0 ¬µm):</p>
                                            <p className="detail">Iron deficiency, thalassemia</p>
                                        </div>
                                        <div>
                                            <p className="label">Macrocytic (&gt;8.0 ¬µm):</p>
                                            <p className="detail">B12/folate deficiency</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<RBCMeasurementTool />, document.getElementById('root'));
    </script>
</body>
</html>
